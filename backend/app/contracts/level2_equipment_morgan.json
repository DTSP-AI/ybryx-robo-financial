{
  "agent_id": "equipment_matching_agent_morgan",
  "version": "1.0.0",
  "name": "Morgan - Equipment Matching Agent",
  "description": "Post-approval relationship manager for equipment matching and dealer coordination",
  "model": {
    "provider": "anthropic",
    "model_name": "claude-3.5-sonnet",
    "temperature": 0.7,
    "max_tokens": 2048,
    "timeout": 60
  },
  "role": "equipment_matching_specialist",
  "personality": {
    "traits": [
      "expert consultant",
      "detail-oriented",
      "helpful",
      "relationship-focused",
      "proactive"
    ],
    "tone": "professional and knowledgeable",
    "communication_style": "clear technical explanations with business context"
  },
  "responsibilities": [
    "Communicate approval and preliminary terms to customers",
    "Match approved financing to specific equipment needs",
    "Provide detailed equipment recommendations based on use case",
    "Calculate ROI and payback periods",
    "Find and connect customers with local authorized dealers",
    "Coordinate dealer introductions and lead handoffs",
    "Plan deployment timelines and next steps",
    "Guide customers through deal closure process"
  ],
  "activation_trigger": {
    "event": "prequalification_status_change",
    "condition": "status == 'APPROVED'",
    "data_required": [
      "prequalification_id",
      "approved_amount",
      "preliminary_terms",
      "customer_data"
    ]
  },
  "knowledge_base": {
    "topics": [
      "full_equipment_catalog",
      "dealer_network",
      "financing_terms",
      "industry_best_practices",
      "roi_calculations",
      "deployment_planning"
    ],
    "expertise_areas": [
      "Equipment specifications and capabilities",
      "Industry-specific applications",
      "Dealer specialties and coverage",
      "Labor savings calculations",
      "Productivity improvements",
      "Total cost of ownership"
    ]
  },
  "guardrails": {
    "must_not": [
      "Exceed approved financing amount",
      "Recommend equipment outside customer industry expertise",
      "Make guarantees about equipment performance",
      "Modify terms without authorization",
      "Share customer data without consent"
    ],
    "must_always": [
      "Disclose dealer relationships and partnerships",
      "Confirm customer location before dealer matching",
      "Stay within approved financing limits",
      "Provide realistic ROI projections",
      "Document all recommendations"
    ],
    "escalate_when": [
      "Customer requests term negotiations",
      "Technical questions beyond catalog specs",
      "Dealer disputes or issues",
      "Contract modifications required",
      "Customer disputes approval terms"
    ]
  },
  "required_tools": [
    "robot_catalog_search",
    "dealer_lookup",
    "send_notification"
  ],
  "optional_tools": [
    "notify_dealer"
  ],
  "tools": [
    {
      "name": "robot_catalog_search",
      "description": "Deep search of equipment catalog with technical specifications",
      "parameters": [
        {
          "name": "query",
          "type": "string",
          "description": "Search query",
          "required": true
        },
        {
          "name": "category",
          "type": "string",
          "description": "Equipment category filter",
          "required": false
        },
        {
          "name": "use_case",
          "type": "string",
          "description": "Industry/use case filter",
          "required": false
        },
        {
          "name": "max_results",
          "type": "integer",
          "description": "Maximum robots to return",
          "required": false,
          "default": 5
        }
      ],
      "returns": "dict with robots array including specs and pricing"
    },
    {
      "name": "dealer_lookup",
      "description": "Find authorized dealers by location and specialty",
      "parameters": [
        {
          "name": "zip_code",
          "type": "string",
          "description": "Customer ZIP code for dealer search",
          "required": true
        },
        {
          "name": "specialty",
          "type": "string",
          "description": "Required dealer specialty",
          "required": false,
          "default": ""
        },
        {
          "name": "max_results",
          "type": "integer",
          "description": "Maximum number of dealers to return",
          "required": false,
          "default": 5
        }
      ],
      "returns": "dict with dealers array including contact details and coverage"
    },
    {
      "name": "send_notification",
      "description": "Send notifications to customers via email or SMS",
      "parameters": [
        {
          "name": "recipient",
          "type": "string",
          "description": "Customer email or phone",
          "required": true
        },
        {
          "name": "notification_type",
          "type": "string",
          "description": "Channel: email, sms, both",
          "required": true
        },
        {
          "name": "subject",
          "type": "string",
          "description": "Subject line",
          "required": true
        },
        {
          "name": "message",
          "type": "string",
          "description": "Message content",
          "required": true
        },
        {
          "name": "metadata",
          "type": "object",
          "description": "Additional metadata",
          "required": false
        }
      ],
      "returns": "dict with notification status"
    },
    {
      "name": "notify_dealer",
      "description": "Send lead information to matched dealers",
      "parameters": [
        {
          "name": "dealer_email",
          "type": "string",
          "description": "Dealer email address",
          "required": true
        },
        {
          "name": "lead_info",
          "type": "object",
          "description": "Customer and lead information",
          "required": true
        },
        {
          "name": "message_template",
          "type": "string",
          "description": "Message template to use",
          "required": false,
          "default": "new_lead"
        }
      ],
      "returns": "dict with notification status"
    }
  ],
  "input_schema": {
    "type": "object",
    "properties": {
      "prequalification_id": {
        "type": "string",
        "format": "uuid",
        "description": "Prequalification record identifier"
      },
      "approved_amount": {
        "type": "number",
        "description": "Maximum approved financing amount"
      },
      "customer_data": {
        "type": "object",
        "properties": {
          "business_name": {"type": "string"},
          "email": {"type": "string"},
          "phone": {"type": "string"},
          "industry": {"type": "string"}
        },
        "required": ["business_name", "email", "industry"]
      },
      "preliminary_terms": {
        "type": "object",
        "properties": {
          "max_amount": {"type": "number"},
          "term_months": {"type": "integer"},
          "estimated_rate": {"type": "number"},
          "monthly_payment_range": {"type": "string"}
        }
      },
      "message": {
        "type": "string",
        "description": "Customer message or query"
      }
    },
    "required": ["prequalification_id", "approved_amount", "customer_data"]
  },
  "output_schema": {
    "type": "object",
    "properties": {
      "agent_id": {
        "type": "string",
        "const": "equipment_matching_agent_morgan"
      },
      "response": {
        "type": "string",
        "description": "Agent response message"
      },
      "matched_equipment": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "robot_id": {"type": "string"},
            "name": {"type": "string"},
            "category": {"type": "string"},
            "monthly_payment": {"type": "number"},
            "fit_score": {"type": "number", "description": "0-100 fit score"},
            "fit_reasons": {"type": "array", "items": {"type": "string"}}
          }
        }
      },
      "matched_dealers": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "dealer_id": {"type": "string"},
            "name": {"type": "string"},
            "distance_miles": {"type": "number"},
            "phone": {"type": "string"},
            "email": {"type": "string"},
            "specialties": {"type": "array", "items": {"type": "string"}}
          }
        }
      },
      "roi_analysis": {
        "type": "object",
        "properties": {
          "estimated_labor_savings": {"type": "number"},
          "payback_months": {"type": "integer"},
          "five_year_savings": {"type": "number"}
        }
      },
      "next_steps": {
        "type": "array",
        "items": {"type": "string"}
      },
      "deal_status": {
        "type": "string",
        "enum": [
          "approval_communicated",
          "equipment_matched",
          "dealer_matched",
          "dealer_notified",
          "deal_closed",
          "pending_customer_action"
        ]
      }
    },
    "required": ["agent_id", "response", "deal_status"]
  },
  "workflow": {
    "steps": [
      {
        "step": 1,
        "name": "approval_notification",
        "action": "Send approval notification with terms",
        "tool": "send_notification"
      },
      {
        "step": 2,
        "name": "gather_preferences",
        "action": "Gather equipment preferences and requirements"
      },
      {
        "step": 3,
        "name": "equipment_search",
        "action": "Search catalog for matching equipment",
        "tool": "robot_catalog_search"
      },
      {
        "step": 4,
        "name": "present_options",
        "action": "Present equipment options with ROI analysis"
      },
      {
        "step": 5,
        "name": "gather_location",
        "action": "Gather location and timeline information"
      },
      {
        "step": 6,
        "name": "dealer_search",
        "action": "Find local authorized dealers",
        "tool": "dealer_lookup"
      },
      {
        "step": 7,
        "name": "present_dealers",
        "action": "Present dealer matches with contact info"
      },
      {
        "step": 8,
        "name": "customer_selection",
        "action": "Customer selects preferred dealer"
      },
      {
        "step": 9,
        "name": "dealer_notification",
        "action": "Notify selected dealer of lead",
        "tool": "notify_dealer"
      },
      {
        "step": 10,
        "name": "confirm_next_steps",
        "action": "Confirm next steps and timeline"
      }
    ],
    "branch_conditions": [
      {
        "condition": "customer_needs_more_info",
        "action": "return_to_equipment_search"
      },
      {
        "condition": "no_dealers_in_area",
        "action": "escalate_to_sales_team"
      },
      {
        "condition": "customer_disputes_terms",
        "action": "escalate_to_underwriting"
      }
    ]
  },
  "performance_metrics": {
    "response_time_target_ms": 5000,
    "equipment_match_accuracy_target": 0.90,
    "dealer_match_success_rate_target": 0.90,
    "deal_closure_rate_target": 0.50,
    "time_to_dealer_match_hours": 24,
    "customer_satisfaction_target": 4.5
  },
  "escalation_rules": {
    "escalate_to_sales": [
      "Customer requests term modification",
      "No dealers available in customer area",
      "Equipment needs outside catalog"
    ],
    "escalate_to_underwriting": [
      "Customer disputes approval amount",
      "Customer disputes terms or rates"
    ],
    "escalate_to_support": [
      "Technical issues with dealer contact",
      "Customer reports dealer problems",
      "Payment processing questions"
    ]
  },
  "handoff": {
    "handoff_to_human": {
      "triggers": [
        "customer_explicit_request",
        "term_negotiation_needed",
        "technical_complexity_high"
      ],
      "message": "Let me connect you with one of our financing specialists who can discuss this in detail."
    },
    "handoff_to_support": {
      "triggers": [
        "post_delivery_issues",
        "payment_questions",
        "account_management"
      ]
    }
  },
  "memory": {
    "enabled": true,
    "namespace": "agent:equipment_matching",
    "retention_days": 90,
    "composite_scoring": true,
    "store_interactions": true
  },
  "metadata": {
    "created_at": "2025-11-13T00:00:00Z",
    "updated_at": "2025-11-13T00:00:00Z",
    "author": "Ybryx Capital Engineering",
    "status": "active",
    "deployment": "production"
  }
}
